{"version":3,"sources":["services/blogs.js","services/login.js","components/Blog.js","components/CreateBlog.js","components/Login.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","services_blogs","getAll","axios","get","then","response","data","addBlog","newBlog","token","config","headers","Authorization","post","catch","error","console","log","likeBlog","blog","blogToUpdate","id","title","author","url","likes","user","put","concat","getBlog","removeBlog","window","confirm","delete","services_login","login","Blog","_ref","_useState","useState","_useState2","Object","slicedToArray","showDetailedBlog","setShowDetailedBlog","_useState3","_useState4","updatedBlog","setUpdatedBlog","incrementLikes","blogService","deleteBlog","react_default","a","createElement","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","onClick","name","username","CreateBlog","onChange","showOrHideForm","placeholder","value","Login","password","onSubmit","type","Notification","message","messageStyle","color","msgColor","background","fontSize","borderStyle","borderRadius","padding","propTypes","PropTypes","object","isRequired","func","App","blogs","setBlogs","setTitle","_useState5","_useState6","setAuthor","_useState7","_useState8","setURL","_useState9","_useState10","setUser","_useState11","_useState12","setUsername","_useState13","_useState14","setPassword","_useState15","_useState16","setMessage","_useState17","_useState18","setMsgColor","_useState19","_useState20","visible","setVisible","event","target","clearBlogInputFields","clearLoginInputFields","displayMessage","msg","setTimeout","setVisibility","visibility","className","localStorage","getItem","components_Notification","Fragment","JSON","parse","removeItem","display","components_CreateBlog","hasOwnProperty","listStyle","result","sort","blog1","blog2","map","key","components_Blog","length","components_Login","preventDefault","loginService","setItem","stringify","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.015dfc7e.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/blogs'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl).then(response => response.data)\r\n}\r\n\r\n// const addBlog = async (newBlog, token) => {\r\n//   const config = {\r\n//     headers: { Authorization: token },\r\n//   }\r\n//   const response = await axios.post(baseUrl, newBlog, config)\r\n//   return response.data\r\n// }\r\n\r\nconst addBlog = (newBlog, token) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n  return axios\r\n    .post(baseUrl, newBlog, config)\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.log('Error in blogs.js', error.response.data)\r\n      return error.response.data\r\n    })\r\n}\r\n\r\nconst likeBlog = (blog) => {\r\n  const blogToUpdate = {\r\n    id: blog.id,\r\n    title: blog.title,\r\n    author: blog.author,\r\n    url: blog.url,\r\n    likes: blog.likes + 1,\r\n    user: blog.user.id\r\n  }\r\n\r\n  return axios\r\n    .put(`${baseUrl}/${blogToUpdate.id}`, blogToUpdate)\r\n    .then(response => response.data)\r\n    .catch(error => {\r\n      console.log(`Error in likeBlog of blogs.js ${error.response.data}`)\r\n      return error.response.data\r\n    })\r\n}\r\n\r\nconst getBlog = (blog) => {\r\n  return axios\r\n    .get(`${baseUrl}/${blog.id}`)\r\n    .then(response => response.data)\r\n    .catch(error => error.response.data)\r\n}\r\n\r\nconst removeBlog = (blog, user) => {\r\n  const config = {\r\n    headers: { Authorization: `bearer ${user.token}` }\r\n  }\r\n  if (window.confirm('do you really want to delete the blog?')) {\r\n    console.log('About to remove blog!!!')\r\n    return axios\r\n      .delete(`${baseUrl}/${blog.id}`, config)\r\n      .then(response => response.data)\r\n      .catch(error => error.response.data)\r\n  }\r\n}\r\n\r\nexport default { getAll, addBlog, likeBlog, getBlog, removeBlog }","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = (user) => {\r\n  // let resp\r\n  // try {\r\n  // return (await axios.post(baseUrl, user)).data\r\n  //   return resp.data\r\n  // }\r\n  // catch(error) {\r\n  //   console.log(`Error in login: ${error.resp.data}`)\r\n  //   throw new Error(error)\r\n  // }\r\n  console.log(`URL: ${baseUrl}`)\r\n  return axios\r\n    .post(baseUrl, user)\r\n    .then( response => response.data )\r\n    .catch( error => {\r\n      console.log('Error in login.js', error.response.data)\r\n      return error.response.data})\r\n}\r\n\r\nexport default { login }","import React, { useState } from 'react'\r\nimport blogService from '../services/blogs'\r\n\r\nlet Blog = ({ blog, user }) => {\r\n  const [ showDetailedBlog, setShowDetailedBlog ] = useState(false)\r\n  const [ updatedBlog, setUpdatedBlog] = useState(blog)\r\n\r\n  const blogStyle = {\r\n    paddingTop: 5,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const incrementLikes = () => {\r\n    blogService.likeBlog(blog).then(response => setUpdatedBlog(response))\r\n  }\r\n\r\n  const deleteBlog = () => {\r\n    blogService.removeBlog(updatedBlog, user)\r\n  }\r\n\r\n  const showBlogDetails = () => {\r\n    return (\r\n      <div>\r\n        <div onClick={() => setShowDetailedBlog(!showDetailedBlog)}>\r\n          {updatedBlog.title}\r\n        </div>\r\n        <div>{updatedBlog.url}</div>\r\n        <div>\r\n          {updatedBlog.likes} likes&nbsp;&nbsp;\r\n          <button onClick={incrementLikes}>like</button>\r\n        </div>\r\n        <div>{updatedBlog.user ? `added by ${updatedBlog.user.name}` : ''}</div>\r\n        {user.username === updatedBlog.user.username ?\r\n          <button onClick={deleteBlog}>remove</button> : ''}\r\n      </div>)\r\n  }\r\n\r\n  return (\r\n    <div style={blogStyle}>\r\n      {showDetailedBlog ?\r\n        showBlogDetails() : <div onClick={() => setShowDetailedBlog(!showDetailedBlog)}>\r\n          {updatedBlog.title} - {updatedBlog.author}\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Blog","import React from 'react'\r\n\r\nconst CreateBlog = ({ blog, onChange, onClick, showOrHideForm }) => {\r\n  return (\r\n    <div>\r\n            Title: <input name='title' placeholder=\"Type title...\" value={blog.title} onChange={onChange}/><br/>\r\n            Author: <input name='author' placeholder=\"Type author...\" value={blog.author} onChange={onChange}/><br/>\r\n            URL: <input name='url' placeholder=\"Type URL...\" value={blog.url} onChange={onChange}/><br/>\r\n      <button name='create-blog' onClick={onClick}>Create Blog</button>\r\n      <button name='hide-form' onClick={showOrHideForm}>Hide Form</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CreateBlog","import React from 'react'\r\n\r\nconst Login = ({ username, password, onSubmit, onChange }) => {\r\n  return (\r\n    <div>\r\n      <form name=\"login-form\" onSubmit={onSubmit}>\r\n        <div>Username: <input name='username' value={username} onChange={onChange}/></div>\r\n        <div>Password: <input name='password' value={password} onChange={onChange} type=\"password\"/></div>\r\n        <div><button type=\"submit\">Submit</button></div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login","import React from 'react'\r\n\r\nconst Notification = ({ message, msgColor }) => {\r\n  const messageStyle = {\r\n    color: msgColor,\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  }\r\n  // messageStyle.color = msgColor\r\n\r\n  return <div style={messageStyle}>{message}</div>\r\n}\r\n\r\nexport default Notification","import React, { useState } from 'react'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\nimport Blog from './components/Blog'\r\nimport CreateBlog from './components/CreateBlog'\r\nimport Login from './components/Login'\r\nimport Notification from './components/Notification'\r\nimport PropTypes from 'prop-types'\r\n\r\nfunction App() {\r\n  const [ blogs, setBlogs ] = useState([])\r\n  const [ title, setTitle ] = useState('')\r\n  const [ author, setAuthor ] = useState('')\r\n  const [ url, setURL ] = useState('')\r\n  const [ user, setUser ] = useState(null)\r\n  const [ username, setUsername ] = useState('')\r\n  const [ password, setPassword ] = useState('')\r\n  const [ message, setMessage ] = useState(null)\r\n  const [ msgColor, setMsgColor ] = useState(null)\r\n  const [ visible, setVisible ] = useState(true)\r\n\r\n  // useEffect(() => {\r\n  //   blogService\r\n  //   .getAll()\r\n  //   .then(result => setBlogs(result))}, [])\r\n\r\n  const showAllBlogs = () => {\r\n    blogService\r\n      .getAll()\r\n      .then(result => setBlogs(result.sort((blog1, blog2) => blog2.likes - blog1.likes)))\r\n    return blogs.map(blog => <li key={blog.id}><Blog blog={blog} user={user}/></li>)\r\n  }\r\n\r\n  const onChange = (event) => {\r\n    switch(event.target.name) {\r\n    case 'title'    : setTitle(event.target.value)\r\n      break\r\n    case 'author'   : setAuthor(event.target.value)\r\n      break\r\n    case 'url'      : setURL(event.target.value)\r\n      break\r\n    case 'username' : setUsername(event.target.value)\r\n      break\r\n    case 'password' : setPassword(event.target.value)\r\n      break\r\n    default         :\r\n    }\r\n  }\r\n\r\n  // const handleLogin = async (event) => {\r\n  //   event.preventDefault()\r\n  //   try {\r\n  //     const loggedInUser = await loginService.login({username, password})\r\n  //     window.localStorage.setItem('user', JSON.stringify(loggedInUser))\r\n  //     clearLoginInputFields()\r\n  //     setUser(loggedInUser)\r\n  //   }\r\n  //   catch(error) {\r\n  //     setErrorMsg('Wrong credentials')\r\n  //     setTimeout(() => setErrorMsg(null), 5000)\r\n  //   }\r\n  // }\r\n\r\n  const handleLogin = (event) => {\r\n    event.preventDefault()\r\n    loginService\r\n      .login({ username, password })\r\n      .then(response => {\r\n        if (!response.hasOwnProperty('error')) {\r\n          window.localStorage.setItem('user', JSON.stringify(response))\r\n          clearLoginInputFields()\r\n          setUser(response)\r\n        }\r\n        else {\r\n          displayMessage(response.error, 'red')\r\n        }\r\n      })\r\n  }\r\n\r\n  const handleLogout = (event) => {\r\n    window.localStorage.removeItem('user')\r\n    setUser(null)\r\n  }\r\n\r\n  // const onClick = async (event) => {\r\n  //   const blog = { title, author, url }\r\n  //   clearBlogInputFields()\r\n  //   // const newBlog =\r\n  //   await blogService.addBlog(blog, `bearer ${user.token}`)\r\n  //   // setBlogs(blogs.concat(newBlog))\r\n  // }\r\n\r\n  const onClick = () => {\r\n    const blog = { title, author, url }\r\n    clearBlogInputFields()\r\n    // const newBlog =\r\n    blogService\r\n      .addBlog(blog, `bearer ${user.token}`)\r\n      .then(response => {\r\n        if (response.hasOwnProperty('error')) {\r\n          displayMessage(response.error, 'red')\r\n        }\r\n        else {\r\n          const msg = `a new blog ${response.title} by ${response.author} has been added`\r\n          displayMessage(msg, 'green')\r\n        }\r\n      })\r\n    // setBlogs(blogs.concat(newBlog))\r\n  }\r\n\r\n  const showOrHideForm = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  const clearBlogInputFields = () => {\r\n    setTitle('')\r\n    setAuthor('')\r\n    setURL('')\r\n  }\r\n\r\n  const clearLoginInputFields = () => {\r\n    setUsername('')\r\n    setPassword('')\r\n  }\r\n\r\n  const displayMessage = (msg, color) => {\r\n    setMessage(msg)\r\n    setMsgColor(color)\r\n    setTimeout(() => setMessage(null), 5000)\r\n  }\r\n\r\n  const setVisibility = visibility => visibility ? '' : 'none'\r\n\r\n  const blog = { title, author, url }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {!window.localStorage.getItem('user') ?\r\n        <div>\r\n          <h1>Log in to App</h1>\r\n          {message ? <Notification message={message} msgColor={msgColor} /> : <></>}\r\n          <Login username={username} password={password} onChange={onChange} onSubmit={handleLogin} />\r\n        </div> :\r\n        <div>\r\n          <h1>Blogs</h1>\r\n          {message ? <Notification message={message} msgColor={msgColor} /> : <></>}\r\n          <p>\r\n            User {JSON.parse(window.localStorage.getItem('user')).name} logged in\r\n            <button onClick={handleLogout}>Logout</button>\r\n          </p>\r\n          <div style={{ display: setVisibility(visible) }}>\r\n            <button name='show-form' onClick={showOrHideForm}>Show Form</button>\r\n          </div>\r\n          <div style={{ display: setVisibility(!visible) }}>\r\n            <h1><p>Create New Blog</p></h1>\r\n            <CreateBlog blog={blog} onChange={onChange} onClick={onClick} showOrHideForm={showOrHideForm}/>\r\n          </div>\r\n          <div>\r\n            <ul style={{ listStyle: 'none', paddingLeft: 0 }}>{showAllBlogs()}</ul>\r\n            <p>Total blogs: {blogs.length}</p>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nCreateBlog.propTypes = {\r\n  blog: PropTypes.object.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n  showOrHideForm: PropTypes.func.isRequired\r\n}\r\n\r\nexport default App","\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}