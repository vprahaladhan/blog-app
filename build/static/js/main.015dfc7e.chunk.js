(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),l=n.n(o),u=n(1),c=n(3),i=n.n(c),s="/api/blogs",m={getAll:function(){return i.a.get(s).then(function(e){return e.data})},addBlog:function(e,t){var n={headers:{Authorization:t}};return i.a.post(s,e,n).then(function(e){return e.data}).catch(function(e){return console.log("Error in blogs.js",e.response.data),e.response.data})},likeBlog:function(e){var t={id:e.id,title:e.title,author:e.author,url:e.url,likes:e.likes+1,user:e.user.id};return i.a.put("".concat(s,"/").concat(t.id),t).then(function(e){return e.data}).catch(function(e){return console.log("Error in likeBlog of blogs.js ".concat(e.response.data)),e.response.data})},getBlog:function(e){return i.a.get("".concat(s,"/").concat(e.id)).then(function(e){return e.data}).catch(function(e){return e.response.data})},removeBlog:function(e,t){var n={headers:{Authorization:"bearer ".concat(t.token)}};if(window.confirm("do you really want to delete the blog?"))return console.log("About to remove blog!!!"),i.a.delete("".concat(s,"/").concat(e.id),n).then(function(e){return e.data}).catch(function(e){return e.response.data})}},d={login:function(e){return console.log("URL: ".concat("/api/login")),i.a.post("/api/login",e).then(function(e){return e.data}).catch(function(e){return console.log("Error in login.js",e.response.data),e.response.data})}},g=function(e){var t=e.blog,n=e.user,o=Object(a.useState)(!1),l=Object(u.a)(o,2),c=l[0],i=l[1],s=Object(a.useState)(t),d=Object(u.a)(s,2),g=d[0],b=d[1],h=function(){m.likeBlog(t).then(function(e){return b(e)})},p=function(){m.removeBlog(g,n)};return r.a.createElement("div",{style:{paddingTop:5,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5}},c?r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return i(!c)}},g.title),r.a.createElement("div",null,g.url),r.a.createElement("div",null,g.likes," likes\xa0\xa0",r.a.createElement("button",{onClick:h},"like")),r.a.createElement("div",null,g.user?"added by ".concat(g.user.name):""),n.username===g.user.username?r.a.createElement("button",{onClick:p},"remove"):""):r.a.createElement("div",{onClick:function(){return i(!c)}},g.title," - ",g.author))},b=function(e){var t=e.blog,n=e.onChange,a=e.onClick,o=e.showOrHideForm;return r.a.createElement("div",null,"Title: ",r.a.createElement("input",{name:"title",placeholder:"Type title...",value:t.title,onChange:n}),r.a.createElement("br",null),"Author: ",r.a.createElement("input",{name:"author",placeholder:"Type author...",value:t.author,onChange:n}),r.a.createElement("br",null),"URL: ",r.a.createElement("input",{name:"url",placeholder:"Type URL...",value:t.url,onChange:n}),r.a.createElement("br",null),r.a.createElement("button",{name:"create-blog",onClick:a},"Create Blog"),r.a.createElement("button",{name:"hide-form",onClick:o},"Hide Form"))},h=function(e){var t=e.username,n=e.password,a=e.onSubmit,o=e.onChange;return r.a.createElement("div",null,r.a.createElement("form",{name:"login-form",onSubmit:a},r.a.createElement("div",null,"Username: ",r.a.createElement("input",{name:"username",value:t,onChange:o})),r.a.createElement("div",null,"Password: ",r.a.createElement("input",{name:"password",value:n,onChange:o,type:"password"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Submit"))))},p=function(e){var t=e.message,n={color:e.msgColor,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return r.a.createElement("div",{style:n},t)},f=n(4),E=n.n(f);b.propTypes={blog:E.a.object.isRequired,onChange:E.a.func.isRequired,onClick:E.a.func.isRequired,showOrHideForm:E.a.func.isRequired};var v=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(""),c=Object(u.a)(l,2),i=c[0],s=c[1],f=Object(a.useState)(""),E=Object(u.a)(f,2),v=E[0],w=E[1],k=Object(a.useState)(""),O=Object(u.a)(k,2),j=O[0],C=O[1],S=Object(a.useState)(null),y=Object(u.a)(S,2),B=y[0],A=y[1],R=Object(a.useState)(""),T=Object(u.a)(R,2),F=T[0],L=T[1],I=Object(a.useState)(""),U=Object(u.a)(I,2),q=U[0],H=U[1],J=Object(a.useState)(null),N=Object(u.a)(J,2),z=N[0],P=N[1],x=Object(a.useState)(null),D=Object(u.a)(x,2),W=D[0],G=D[1],K=Object(a.useState)(!0),M=Object(u.a)(K,2),Q=M[0],V=M[1],X=function(e){switch(e.target.name){case"title":s(e.target.value);break;case"author":w(e.target.value);break;case"url":C(e.target.value);break;case"username":L(e.target.value);break;case"password":H(e.target.value)}},Y=function(){V(!Q)},Z=function(){s(""),w(""),C("")},$=function(){L(""),H("")},_=function(e,t){P(e),G(t),setTimeout(function(){return P(null)},5e3)},ee=function(e){return e?"":"none"},te={title:i,author:v,url:j};return r.a.createElement("div",{className:"App"},window.localStorage.getItem("user")?r.a.createElement("div",null,r.a.createElement("h1",null,"Blogs"),z?r.a.createElement(p,{message:z,msgColor:W}):r.a.createElement(r.a.Fragment,null),r.a.createElement("p",null,"User ",JSON.parse(window.localStorage.getItem("user")).name," logged in",r.a.createElement("button",{onClick:function(e){window.localStorage.removeItem("user"),A(null)}},"Logout")),r.a.createElement("div",{style:{display:ee(Q)}},r.a.createElement("button",{name:"show-form",onClick:Y},"Show Form")),r.a.createElement("div",{style:{display:ee(!Q)}},r.a.createElement("h1",null,r.a.createElement("p",null,"Create New Blog")),r.a.createElement(b,{blog:te,onChange:X,onClick:function(){var e={title:i,author:v,url:j};Z(),m.addBlog(e,"bearer ".concat(B.token)).then(function(e){if(e.hasOwnProperty("error"))_(e.error,"red");else{var t="a new blog ".concat(e.title," by ").concat(e.author," has been added");_(t,"green")}})},showOrHideForm:Y})),r.a.createElement("div",null,r.a.createElement("ul",{style:{listStyle:"none",paddingLeft:0}},(m.getAll().then(function(e){return o(e.sort(function(e,t){return t.likes-e.likes}))}),n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(g,{blog:e,user:B}))}))),r.a.createElement("p",null,"Total blogs: ",n.length))):r.a.createElement("div",null,r.a.createElement("h1",null,"Log in to App"),z?r.a.createElement(p,{message:z,msgColor:W}):r.a.createElement(r.a.Fragment,null),r.a.createElement(h,{username:F,password:q,onChange:X,onSubmit:function(e){e.preventDefault(),d.login({username:F,password:q}).then(function(e){e.hasOwnProperty("error")?_(e.error,"red"):(window.localStorage.setItem("user",JSON.stringify(e)),$(),A(e))})}})))};l.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.015dfc7e.chunk.js.map