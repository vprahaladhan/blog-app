(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,n){e.exports=n(300)},300:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(121),o=n.n(c),l=n(137),u=n(122),s=n(5),i=n.n(s),m=n(8),d=n(18),p=n(30),g=n(31),f=n(301),b=n(303),E=n(304),h=n(4),v=n.n(h),O=n(10),w=n(12),y=n.n(w),S={getAll:function(){var e=Object(m.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),getAllUsers:function(){var e=Object(m.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),addBlog:function(e,t){var n={headers:{Authorization:"bearer ".concat(t)}};return y.a.post("/api/blogs",e,n).then(function(e){return e.data}).catch(function(e){return console.log("Error in blogs.js",e.response.data),e.response.data})},likeBlog:function(e){var t=Object(O.a)({},e,{likes:e.likes+1,user:e.user.id});return y.a.put("".concat("/api/blogs","/").concat(t.id),t).then(function(e){return e.data}).catch(function(e){return console.log("Error in likeBlog of blogs.js",e.response.data),e.response.data})},addCommentToBlog:function(e,t){var n=Object(O.a)({},e,{comments:e.comments.concat(t),user:e.user.id});return y.a.put("".concat("/api/blogs","/").concat(n.id),n).then(function(e){return e.data}).catch(function(e){return console.log("Error in addCommenToBlog of blogs.js",e.response.data),e.response.data})},getBlog:function(e){return y.a.get("".concat("/api/blogs","/").concat(e.id)).then(function(e){return e.data}).catch(function(e){return e.response.data})},removeBlog:function(e,t){var n={headers:{Authorization:"bearer ".concat(t)}};if(window.confirm("do you really want to delete the blog?"))return console.log("About to remove blog!!!"),y.a.delete("".concat("/api/blogs","/").concat(e.id),n).then(function(e){return e.data}).catch(function(e){return e.response.data})}},k=function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=N,e.next=3,S.getAll();case 3:return e.t1=e.sent,e.t2=(0,e.t0)(e.t1),e.abrupt("return",{type:"SHOW_ALL_BLOGS",data:e.t2});case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAllUsers();case 2:return e.t0=e.sent,e.abrupt("return",{type:"SHOW_ALL_USERS",data:e.t0});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.likeBlog(t);case 2:return e.t0=e.sent,e.abrupt("return",{type:"LIKE_BLOG",data:e.t0});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(m.a)(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.addCommentToBlog(t,n);case 2:return e.t0=e.sent,e.abrupt("return",{type:"ADD_COMMENT",data:e.t0});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.addBlog(t,n);case 2:return e.t0=e.sent,e.abrupt("return",{type:"ADD_NEW_BLOG",data:e.t0});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.removeBlog(t,n);case 2:return e.abrupt("return",{type:"REMOVE_BLOG",data:t});case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),_=function(e){return{type:"SET_CURRENT_USER",data:e}},T=function(e,t,n){return{type:"SHOW_NOTIFICATION",data:{message:e,messageColor:t,status:n}}},N=function(e){return e.sort(function(e,t){return t.likes-e.likes})},A={message:"",messageColor:"",status:""},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{blogs:[],users:[],user:null,notification:A},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALL_BLOGS":return Object(O.a)({},e,{blogs:t.data});case"LIKE_BLOG":var n=N(e.blogs.map(function(e){return e.id!==t.data.id?e:t.data}));return Object(O.a)({},e,{blogs:n});case"ADD_NEW_BLOG":return Object(O.a)({},e,{blogs:e.blogs.concat(t.data)});case"REMOVE_BLOG":return Object(O.a)({},e,{blogs:e.blogs.filter(function(e){return e.id!==t.data.id})});case"ADD_COMMENT":var a=N(e.blogs.map(function(e){return e.id!==t.data.id?e:t.data}));return Object(O.a)({},e,{blogs:a});case"SHOW_ALL_USERS":return Object(O.a)({},e,{users:t.data});case"SET_CURRENT_USER":return Object(O.a)({},e,{user:t.data});case"SHOW_NOTIFICATION":return Object(O.a)({},e,{notification:t.data});default:return e}},I=function(e){var t=e.blog,n=e.user,c=e.store,o=Object(a.useState)(!1),l=Object(d.a)(o,2),u=l[0],s=l[1],p=Object(a.useState)(""),f=Object(d.a)(p,2),b=f[0],E=f[1],h=function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,C(t);case 3:e.t1=e.sent,e.t0.dispatch.call(e.t0,e.t1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,x(t,b);case 3:e.t1=e.sent,e.t0.dispatch.call(e.t0,e.t1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.t0=c,e.next=4,L(t,JSON.parse(window.localStorage.getItem("user")).token);case 4:e.t1=e.sent,e.t0.dispatch.call(e.t0,e.t1),c.dispatch(T("Sucessfully deleted blog: ".concat(t.title),"green","success")),setTimeout(function(){return c.dispatch(T("","",""))},2e3);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",null,console.log("Redirect: ",u),u?r.a.createElement(g.a,{to:"/blogs"}):r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,t.title)),r.a.createElement("div",null,t.url),r.a.createElement("div",null,t.likes," likes\xa0\xa0",r.a.createElement("button",{onClick:h},"like")),r.a.createElement("div",null,t.user?"added by ".concat(t.user.name):""),r.a.createElement("div",null,console.log("User 1: ".concat(n.username,", User 2: ").concat(t.user.username))),r.a.createElement("div",null,n.username===t.user.username?r.a.createElement("button",{onClick:O},"remove"):""),r.a.createElement("div",null,r.a.createElement("h3",null,"comments")),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"comment",placeholder:"add comment...",value:b,onChange:function(e){return E(e.target.value)}}),r.a.createElement("button",{onClick:v},"add comment")),r.a.createElement("div",null,r.a.createElement("ul",null,t.comments.map(function(e,t){return r.a.createElement("li",{key:t},e)})))):null)))},U=function(e){var t=e.blog,n=e.onChange,a=e.onClick,c=e.showOrHideForm;return r.a.createElement("div",null,"Title: ",r.a.createElement("input",{name:"title",placeholder:"Type title...",value:t.title,onChange:n}),r.a.createElement("br",null),"Author: ",r.a.createElement("input",{name:"author",placeholder:"Type author...",value:t.author,onChange:n}),r.a.createElement("br",null),"URL: ",r.a.createElement("input",{name:"url",placeholder:"Type URL...",value:t.url,onChange:n}),r.a.createElement("br",null),r.a.createElement("button",{name:"create-blog",onClick:a},"Create Blog"),r.a.createElement("button",{name:"hide-form",onClick:c},"Hide Form"))},F=n(302),H=function(e){var t=e.store,n=e.setVisibility,a=e.visible,c=e.blog,o=e.onChange,l=e.onClick,u=e.showOrHideForm,s={paddingTop:5,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5};return r.a.createElement("div",null,r.a.createElement("div",{style:{display:n(a)}},r.a.createElement("button",{name:"show-form",onClick:u},"Show Form")),r.a.createElement("div",{style:{display:n(!a)}},r.a.createElement("h1",null,r.a.createElement("p",null,"Create New Blog")),r.a.createElement(U,{blog:c,onChange:o,onClick:l,showOrHideForm:u})),r.a.createElement("div",null,r.a.createElement(F.a,{striped:!0,celled:!0},r.a.createElement(F.a.Body,null,t.getState().blogs.map(function(e){return r.a.createElement(F.a.Row,{key:e.id,style:s},r.a.createElement(F.a.Cell,null,r.a.createElement(p.b,{to:"/blogs/".concat(e.id)},e.title," - ",e.author)))}))),r.a.createElement("p",null,"Total blogs: ",t.getState().blogs.length)))},W=function(e){var t=e.user;return r.a.createElement("div",null,t?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,t.name)),r.a.createElement("div",null,r.a.createElement("h3",null,"blogs added")),r.a.createElement("div",null,r.a.createElement("ul",null,t.blogs.map(function(e){return r.a.createElement("li",{key:e.id},e.title)})))):null)},D=function(e){var t=e.store;return r.a.createElement("div",null,r.a.createElement("h1",null,"Users"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("b",null,"blogs created"))),t.getState().users.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(p.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.blogs.length))}))))},G=function(e){var t=e.store;return r.a.createElement("div",null,r.a.createElement(g.b,{exact:!0,path:"/users",render:function(){return r.a.createElement(D,{store:t})}}))},J=function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),r=n[0],c=n[1];return{type:e,value:r,onChange:function(e){c(e.target.value)},reset:function(){c("")}}},M=function(e){return console.log("URL: ".concat("/api/login")),y.a.post("/api/login",e).then(function(e){return e.data}).catch(function(e){return console.log("Error in login.js",e.response.data),e.response.data})},V=function(e){var t=e.store,n=J("text"),a=J("password");return r.a.createElement("div",null,r.a.createElement("form",{className:"ui form",name:"login-form",onSubmit:function(e){e.preventDefault(),M({username:n.value,password:a.value}).then(function(e){e.hasOwnProperty("error")?(t.dispatch(T(e.error+"! please try again.","red","negative")),n.reset(),a.reset(),setTimeout(function(){return t.dispatch(T("","",""))},2e3)):(console.log("User: ",JSON.stringify(e)),window.localStorage.setItem("user",JSON.stringify(e)),t.dispatch(_(e)))})}},r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",Object(O.a)({},n,{reset:void 0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",null,"Password:"),r.a.createElement("input",Object(O.a)({},a,{reset:void 0}))),r.a.createElement("button",{className:"ui button",type:"submit"},"Submit")))},q=function(e){var t=e.message,n=e.msgColor,a={color:n,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return a.color=n,r.a.createElement("div",{style:a},t)},z=n(132);function K(){var e=Object(u.a)(["\n  background: BurlyWood;\n  padding: 1em;\n  "]);return K=function(){return e},e}function P(e){var t=e.store,n=Object(a.useState)(""),c=Object(d.a)(n,2),o=c[0],l=c[1],u=Object(a.useState)(""),s=Object(d.a)(u,2),h=s[0],v=s[1],O=Object(a.useState)(""),w=Object(d.a)(O,2),y=w[0],S=w[1],C=Object(a.useState)(!0),x=Object(d.a)(C,2),L=x[0],N=x[1];Object(a.useEffect)(function(){function e(){return(e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,k();case 3:return e.t1=e.sent,e.t0.dispatch.call(e.t0,e.t1),e.t2=t,e.next=8,j();case 8:e.t3=e.sent,e.t2.dispatch.call(e.t2,e.t3);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]);var A={title:o,author:h,url:y},R=(z.a.div(K()),function(e){switch(e.target.name){case"title":l(e.target.value);break;case"author":v(e.target.value);break;case"url":S(e.target.value)}}),U=function(){var e=Object(m.a)(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={title:o,author:h,url:y},e.t0=t,e.next=4,B(n,JSON.parse(window.localStorage.getItem("user")).token);case 4:e.t1=e.sent,e.t0.dispatch.call(e.t0,e.t1),t.dispatch(T("You created a new blog - ".concat(n.title),"green","success")),setTimeout(function(){return t.dispatch(T("","",""))},2e3),J();case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),F=function(e){return e?"":"none"},D=function(){N(!L)},J=function(){l(""),v(""),S("")};return r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},window.localStorage.getItem("user")?r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(E.a.Item,null,r.a.createElement(p.b,{style:{padding:5},to:"/blogs"},"blogs")),r.a.createElement(E.a.Item,null,r.a.createElement(p.b,{style:{padding:5},to:"/users"},"users")),r.a.createElement(E.a.Item,null,"User ",JSON.parse(window.localStorage.getItem("user")).name," logged in ",r.a.createElement("button",{onClick:function(){window.localStorage.removeItem("user"),t.dispatch(_(null)),N(!0)}},"Logout"))),t.getState().notification.message?r.a.createElement(b.a,{color:t.getState().notification.messageColor},t.getState().notification.message):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",null,r.a.createElement("h1",null,"Blog app"),t.getState().notification.message?r.a.createElement(q,{message:t.getState().notification.message,msgColor:t.getState().notification.messageColor}):r.a.createElement(r.a.Fragment,null)),r.a.createElement(g.b,{exact:!0,path:"/",render:function(){return r.a.createElement(H,{store:t,setVisibility:F,visible:L,blog:A,onChange:R,onClick:U,showOrHideForm:D})}}),r.a.createElement(g.b,{exact:!0,path:"/blogs",render:function(){return r.a.createElement(H,{store:t,setVisibility:F,visible:L,blog:A,onChange:R,onClick:U,showOrHideForm:D})}}),r.a.createElement(g.b,{path:"/blogs/:id",render:function(e){var n=e.match;return r.a.createElement(I,{blog:t.getState().blogs.find(function(e){return e.id===n.params.id}),user:JSON.parse(window.localStorage.getItem("user")),store:t})}}),r.a.createElement(g.b,{exact:!0,path:"/users",render:function(){return r.a.createElement(G,{store:t})}}),r.a.createElement(g.b,{path:"/users/:id",render:function(e){var n=e.match,a=t.getState().users.find(function(e){return e.id===n.params.id});return r.a.createElement(W,{user:a})}})):r.a.createElement("div",null,r.a.createElement("h1",null,"Log in to App"),t.getState().notification.message?r.a.createElement(b.a,{color:t.getState().notification.messageColor},t.getState().notification.message):r.a.createElement(r.a.Fragment,null),r.a.createElement(V,{store:t}),r.a.createElement(g.a,{to:"/"})))))}U.propTypes={blog:v.a.object.isRequired,onChange:v.a.func.isRequired,onClick:v.a.func.isRequired,showOrHideForm:v.a.func.isRequired};var Y=Object(l.a)(R),Q=function(){o.a.render(r.a.createElement(P,{store:Y}),document.getElementById("root"))};Q(),Y.subscribe(Q)}},[[152,1,2]]]);
//# sourceMappingURL=main.389668e0.chunk.js.map